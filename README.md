# API_telegram_space_images
Данный проект состоит из 5 основных частей
# 1. Скрипт для получения фотографий запуска с сайта SpaceX.
С помощью запроса к сервису API: [SpaceX](https://api.spacexdata.com/)
Необходимо задать [flight_id], например:
```
flight_id = '5eb87d47ffd86e000604b38a'
```
# 2. Скрипт для получения фотографий космической тематики с сайта NASA.
С помощью запроса к сервису API: [NASA](https://api.nasa.gov/planetary/apod)

Сервис не даст вам данные, пока вы не получите персональный ключ – “токен. Он нужен для взаимодействия с API NASA. Для этого необходимо зарегестрироваться на сайте, используя почту.

Далее необходимо создать файл `.env`, в нем будет храниться токен. Например: `NASA_TOKEN = '12345678'`

Помимо токена, можно изменить параметр `count`, отвечающий за число фотографий запрашиваемых с сайта(сейчас стоит рандомный выбор из диапазона от [1:50])

# 3. Скрипт для получения фотографий эпической тематики с сайта NASA_EPIC.
С помощью запроса к сервису API: [NASA_EPIC](https://api.nasa.gov/EPIC/api/natural/images)

Для взаимодействия с данным сервисом API, вам так же понадобиться `NASA_TOKEN`, как его получить см. пункт 2.

Помимо токена, можно изменить параметр `response_content`, сейчас стоит ограничение на выдачу [0:2]

# 4. Скрипт для публикации фотографий в телеграм канал.
Необходимо использовать ту же директорию с изображениями: 
``` 
content_path = 'images'
```
Для взаимодействия с API телеграма, вам так же понадобиться `TELEGRAM_TOKEN`- токен бота, его следует добавить в файл `.env`.

Скрипт берет рандомное изображение из папки и отправляет их с помощью бота в ваш телеграм канал.

[ВНИМАНИЕ] 
Чтобы выдача одного и того же изображения не повторялась, скрипт настроен так, что он удаляет изображение из директории `images`, и дейтсвует до полного опустения данной директории.

# 5. Скрипт компиляции всех возможностей проекта, пример их взаимодействия.

Данный скрипт является совокупностью работы скриптов [1:6]

Из нового здесь переменная `'PUBLICATION_FREQUENCY'`, которая отвечает за частоту вызова функции публикации изображения.

## Как установить
* Python должен быть уже установлен. 
* Правильно будет установить виртуальное окружение:
``` 
python -m venv venv 
```
Далее необходимо его активировать:
```
source venv/Scripts/activate 
```
Затем используйте pip для установки зависимостей:
```
pip install -r requirements.txt 
```

## Как запустить
* Важно! При запросах используется ваш `NASA_TOKEN` и `TELEGRAM_TOKEN`, `CHAT_ID` виртуальное окружение должо быть активировано, зависимости - установлены.

Так же важным моментом является установка прав администрирования для вашего бота(для канала с вашим `CHAT_ID`), иначе он не сможет создавать посты :(.

Запускаем скрипт компиляции (пункт 7 ), следующим образом:
``` 
python project_assembly_file.py
```
Ждем когда наш бот начнет присылать фотографии, когда фото закончатся, бот оповестит вас и скрипт сбора фотографий соберет новую выборку, бот продолжит работу.

### Цель проекта
Флоу работы программы такой:
* Код запускает загрузку фотографий
* Каждые 4 часа публикует одну случайную из них в Telegram
* Когда фото закончились, запускает скачивание фото и публикацию снова.